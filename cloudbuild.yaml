
steps:
  # Build the Docker image from your Dockerfile
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'build', '-t', 'gcr.io/$PROJECT_ID/freight-tracker-app', '.' ]

  # Push the image to Container Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'push', 'gcr.io/$PROJECT_ID/freight-tracker-app' ]

  # (Optional) Deploy to Cloud Run -- uncomment if you want automatic deploy
  # - name: 'gcr.io/google.com/cloudsdktool/cloud-sdk'
  #   entrypoint: gcloud
  #   args: [
  #     'run', 'deploy', 'freight-tracker-app',
  #     '--image', 'gcr.io/$PROJECT_ID/freight-tracker-app',
  #     '--region', 'us-central1',      # Change to your region
  #     '--platform', 'managed',
  #     '--allow-unauthenticated'
  #   ]

images:
  - 'gcr.io/$PROJECT_ID/freight-tracker-app'
